# 20251223104014

## Title
Layout-Independent Hotkeys

## Staging
Explain why it might have stopped intercepting the Ctrl-Alt-E and Ctrl-Alt-F key combinations after the latest improvements?

## Description
There have been improvements to Fragment Mode. But this mechanism could sometimes fail earlier, before yesterday’s improvements. This may be due to combinations being intercepted by other programs in the Windows 11 Pro environment, but this is not certain, since it sometimes works, sometimes it doesn’t in the same environment.

## Implementation Details
- **Analysis**: The issue was identified as independent of recent changes. The root cause was the hotkey mechanism's reliance on character mapping (`pynput`), which caused failures when the keyboard layout (e.g., Russian) produced characters different from the expected hotkey definitions (e.g., 'у' instead of 'e').
- **Solution**: Refactored the hotkey listener to use **Virtual Key Codes (VK)**. This approach targets the physical key location (Scan Code) rather than the generated character, ensuring consistent interception regardless of the active input language or environment.
- **Verification**: Confirmed that `Ctrl+Alt+E` and `Ctrl+Alt+F` now trigger correctly in both English and Russian layouts, resolving the intermittent failure described.

## Status
- [x] Implemented in v1.4.14.
